# 機能要求書

## 目次
1. [はじめに](#はじめに)
2. [システム概要](#システム概要)
3. [機能要求](#機能要求)
    1. [システムが提供する具体的な機能](#システムが提供する具体的な機能)
        1. [ランドマーク探索](#ランドマーク探索)
        2. [写真のアップロードと自動解析](#写真のアップロードと自動解析)
        3. [活動履歴の確認](#活動履歴の確認)
    2. [ユーザーストーリーやユースケース](#ユーザーストーリーやユースケース)
        1. [ユースケース1の説明 - ランドマーク探索](#ユースケース1の説明---ランドマーク探索)
        2. [ユースケース2の説明 - 写真アップロード](#ユースケース2の説明---写真アップロード)
    3. [データの処理および管理](#データの処理および管理)
        1. [データ入力](#データ入力)
        2. [データ処理](#データ処理)
        3. [データ出力](#データ出力)
        4. [データ管理](#データ管理)
    4. [外部システムとのインターフェース](#外部システムとのインターフェース)
        1. [インターフェース1 - チャットアプリ](#インターフェース1---チャットアプリ)
        2. [インターフェース2 - 画像解析エンジン](#インターフェース2---画像解析エンジン)
    
## はじめに

本書は、イベントアプリケーションの機能要求について詳細に記述したものである。このアプリケーションは、参加者がチャットアプリから起動し、ランドマークを探索し、写真をアップロードして自動解析を行うことを目的としています。

## システム概要

イベントアプリは、参加者がチャットアプリから起動し、地図を参照して指定されたランドマークを探索する機能を提供します。ランドマーク到着後に写真を撮影し、アップロードして自動解析を行い、その結果を表示します。また、参加者の活動履歴を確認するための機能も備えています。

## 機能要求

### システムが提供する具体的な機能

#### ランドマーク探索

- **インプット**: 地図に従ってランドマークにアクセス。
- **プロセス**: チャットアプリからイベントアプリを起動し、ランドマークの場所を確認。
- **アウトプット**: ランドマークでのアクションログ。

#### 写真のアップロードと自動解析

- **インプット**: スマートフォンから撮影された写真。
- **プロセス**: アップロードされた写真を解析し、関連情報を表示。
- **アウトプット**: 写真の解析結果とスコア表示。

#### 活動履歴の確認

- **インプット**: 参加者の活動データ。
- **プロセス**: オペレータ端末でのデータ確認。
- **アウトプット**: 参加者の活動履歴表示。

### ユーザーストーリーやユースケース

#### ユースケース1の説明 - ランドマーク探索

- **アクター**: 参加者
- **前提条件**: アプリがチャットアプリから正しく起動されていること。
- **基本フロー**: 参加者はチャットアプリからイベントアプリを起動 → 地図を参照してランドマークに移動。
- **代替フロー**: ランドマークが見つからない場合、オペレータによるサポート。
- **後処理条件**: ランドマーク到着後のタスク完了記録。

#### ユースケース2の説明 - 写真アップロード

- **アクター**: 参加者
- **前提条件**: アプリが正しく動作していること、カメラアクセスが許可されていること。
- **基本フロー**: 参加者がランドマークで写真を撮影 → アップロードボタンをタップ → 自動解析が行われる。
- **代替フロー**: アップロードが失敗した場合、エラーメッセージを表示。
- **後処理条件**: 解析結果の表示、次のランドマークへの誘導。

### データの処理および管理

#### データ入力

- **入力データの形式**: JPEG、PNG画像形式の写真データ。
- **データの検証方法**: ファイルサイズと形式が適正かチェック。
- **データの入力手順**: アップロードボタンをタップ。

#### データ処理

- **データの加工方法**: 画像解析エンジンでの特徴抽出。
- **データの変換方法**: 画像をラベルとスコアに変換。
- **データの計算方法**: 特典スコアの算出。

#### データ出力

- **出力データの形式**: JSON形式の解析結果。
- **データの出力先**: スマートフォン画面、オペレータ端末。
- **データの出力手順**: 解析完了後に自動表示。

#### データ管理

- **データの保存方法**: クラウドサーバに保存。
- **バックアップ方法**: 定期的なデータのクラウドバックアップ。
- **データのリストア方法**: 失敗時にはバックアップからデータリストア。

### 外部システムとのインターフェース

#### インターフェース1 - チャットアプリ

- **インターフェースの目的**: イベントアプリの起動および通知の配信。
- **データの交換形式**: JSON形式。
- **インターフェースプロトコル**: HTTP/HTTPS。
- **エラーハンドリング**: リトライとエラーメッセージの通知。

#### インターフェース2 - 画像解析エンジン

- **インターフェースの目的**: アップロードされた画像の解析。
- **データの交換形式**: JPEG、PNG。
- **インターフェースプロトコル**: HTTP/HTTPS。
- **エラーハンドリング**: 解析失敗時のエラーメッセージと再実行処理。